kind: tool
name: nmap
version: 1.0.0
description: Network scanner for port discovery, service detection, and OS fingerprinting
author: Gibson Security Team
license: MIT
repository: https://github.com/zero-day-ai/gibson-tools-official

build:
  command: go build -o nmap .
  artifacts:
    - nmap
  workdir: .

runtime:
  type: go
  entrypoint: ./nmap
  port: 0
  timeout:
    default: 5m
    min: 30s
    max: 30m

dependencies:
  gibson: ">=1.0.0"
  system:
    - nmap  # nmap must be installed (apt install nmap)
  env: {}

# Worker configuration for queue-based execution
worker:
  # Nmap is I/O-bound (network scans), so higher concurrency is beneficial.
  # Each scan spawns a separate nmap process, so memory usage scales with concurrency.
  concurrency: 4

  # Allow up to 60 seconds for graceful shutdown since scans can take time.
  shutdown_timeout: 60s

  # Heartbeat every 10 seconds to maintain health status
  heartbeat_interval: 10s
